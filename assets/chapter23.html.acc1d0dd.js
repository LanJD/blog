import{_ as e}from"./plugin-vue_export-helper.21dcd24c.js";import{o as a,c as r,e as p}from"./app.f8ee6222.js";const t={},n=p(`<h2 id="ajax" tabindex="-1"><a class="header-anchor" href="#ajax" aria-hidden="true">#</a> Ajax</h2><p>Ajax \u662F Asynchronous JavaScript and XML\uFF08\u5F02\u6B65 JavaScript \u548C XML\uFF09\u7684\u7B80\u5199</p><p>Ajax \u4E2D\u7684\u5F02\u6B65\uFF1A\u53EF\u4EE5\u5F02\u6B65\u5730\u5411\u670D\u52A1\u5668\u53D1\u9001\u8BF7\u6C42\uFF0C\u5728\u7B49\u5F85\u54CD\u5E94\u7684\u8FC7\u7A0B\u4E2D\uFF0C\u4E0D\u4F1A\u963B\u585E\u5F53\u524D\u9875\u9762\uFF0C\u6D4F\u89C8\u5668\u53EF\u4EE5\u505A\u81EA\u5DF1\u7684\u4E8B\u60C5\u3002\u76F4\u5230\u6210\u529F\u83B7\u53D6\u54CD\u5E94\u540E\uFF0C\u6D4F\u89C8\u5668\u624D\u5F00\u59CB\u5904\u7406\u54CD\u5E94\u6570\u636E</p><p>Ajax \u60F3\u8981\u5B9E\u73B0\u6D4F\u89C8\u5668\u4E0E\u670D\u52A1\u5668\u4E4B\u95F4\u7684\u5F02\u6B65\u901A\u4FE1\uFF0C\u9700\u8981\u4F9D\u9760 XMLHttpRequest\uFF0C\u5B83\u662F\u4E00\u4E2A\u6784\u9020\u51FD\u6570</p><h3 id="ajax-\u7684\u4F7F\u7528\u6B65\u9AA4" tabindex="-1"><a class="header-anchor" href="#ajax-\u7684\u4F7F\u7528\u6B65\u9AA4" aria-hidden="true">#</a> Ajax \u7684\u4F7F\u7528\u6B65\u9AA4</h3><p>\u521B\u5EFA xhr \u5BF9\u8C61</p><pre><code>const xhr = new XMLHttpRequest();
</code></pre><p>\u76D1\u542C\u4E8B\u4EF6\uFF0C\u5904\u7406\u54CD\u5E94\uFF0C\u5F53\u83B7\u53D6\u5230\u54CD\u5E94\u540E\uFF0C\u4F1A\u89E6\u53D1 xhr \u5BF9\u8C61\u7684 readystatechange \u4E8B\u4EF6\uFF0C\u53EF\u4EE5\u5728\u8BE5\u4E8B\u4EF6\u4E2D\u5BF9\u54CD\u5E94\u8FDB\u884C\u5904\u7406</p><pre><code>xhr.onreadystatechange = () =&gt; {
   if (xhr.readyState !== 4) return;

   // HTTP CODE
   // \u83B7\u53D6\u5230\u54CD\u5E94\u540E\uFF0C\u54CD\u5E94\u7684\u5185\u5BB9\u4F1A\u81EA\u52A8\u586B\u5145 xhr \u5BF9\u8C61\u7684\u5C5E\u6027
   // xhr.status\uFF1AHTTP  200 404
   // xhr.statusText\uFF1AHTTP \u72B6\u6001\u8BF4\u660E OK Not Found
   if ((xhr.status &gt;= 200) &amp; (xhr.status &lt; 300) || xhr.status === 304) {
     // console.log(&#39;\u6B63\u5E38\u4F7F\u7528\u54CD\u5E94\u6570\u636E&#39;);
     console.log(xhr.responseText);
   }
};
</code></pre><p>readystatechange \u4E8B\u4EF6\u4E5F\u53EF\u4EE5\u914D\u5408 addEventListener \u4F7F\u7528\uFF0C\u4E0D\u8FC7\u8981\u6CE8\u610F\uFF0CIE6~8 \u4E0D\u652F\u6301 addEventListener\u3002\u4E3A\u4E86\u517C\u5BB9\u6027\uFF0Creadystatechange \u4E2D\u4E0D\u4F7F\u7528 this\uFF0C\u800C\u662F\u76F4\u63A5\u4F7F\u7528 xhr\u3002\u7531\u4E8E\u517C\u5BB9\u6027\u7684\u539F\u56E0\uFF0C\u6700\u597D\u653E\u5728 open \u4E4B\u524D</p><pre><code>xhr.addEventListener(&#39;readystatechange&#39;, () =&gt; {}, fasle);
</code></pre><p>readystatechange \u4E8B\u4EF6\u76D1\u542C readyState \u8FD9\u4E2A\u72B6\u6001\u7684\u53D8\u5316<br> \u5B83\u7684\u503C\u4ECE 0 ~ 4\uFF0C\u4E00\u5171 5 \u4E2A\u72B6\u6001</p><ul><li>0\uFF1A\u672A\u521D\u59CB\u5316\u3002\u5C1A\u672A\u8C03\u7528 open()</li><li>1\uFF1A\u542F\u52A8\u3002\u5DF2\u7ECF\u8C03\u7528 open()\uFF0C\u4F46\u5C1A\u672A\u8C03\u7528 send()</li><li>2\uFF1A\u53D1\u9001\u3002\u5DF2\u7ECF\u8C03\u7528 send()\uFF0C\u4F46\u5C1A\u672A\u63A5\u6536\u5230\u54CD\u5E94</li><li>3\uFF1A\u63A5\u6536\u3002\u5DF2\u7ECF\u63A5\u6536\u5230\u90E8\u5206\u54CD\u5E94\u6570\u636E</li><li>4\uFF1A\u5B8C\u6210\u3002\u5DF2\u7ECF\u63A5\u6536\u5230\u5168\u90E8\u54CD\u5E94\u6570\u636E\uFF0C\u800C\u4E14\u5DF2\u7ECF\u53EF\u4EE5\u5728\u6D4F\u89C8\u5668\u4E2D\u4F7F\u7528\u4E86</li></ul><p>\u51C6\u5907\u53D1\u9001\u8BF7\u6C42\uFF0C\u8C03\u7528 open \u5E76\u4E0D\u4F1A\u771F\u6B63\u53D1\u9001\u8BF7\u6C42\uFF0C\u800C\u53EA\u662F\u505A\u597D\u53D1\u9001\u8BF7\u6C42\u524D\u7684\u51C6\u5907\u5DE5\u4F5C</p><pre><code>xhr.open(
  &#39;HTTP \u65B9\u6CD5 GET\u3001POST\u3001PUT\u3001DELETE&#39;,
  &#39;\u5730\u5740 URL&#39;,
   true
);
</code></pre><p>\u8C03\u7528 send() \u6B63\u5F0F\u53D1\u9001\u8BF7\u6C42\uFF0C\u53C2\u6570\u662F\u901A\u8FC7\u8BF7\u6C42\u4F53\u643A\u5E26\u7684\u6570\u636E</p><pre><code>xhr.send(null);
</code></pre><h3 id="json" tabindex="-1"><a class="header-anchor" href="#json" aria-hidden="true">#</a> JSON</h3><ul><li>JSON.parse()</li><li>JSON.stringify()</li></ul><h3 id="\u8DE8\u57DF" tabindex="-1"><a class="header-anchor" href="#\u8DE8\u57DF" aria-hidden="true">#</a> \u8DE8\u57DF</h3><p>\u5411\u4E00\u4E2A\u57DF\u53D1\u9001\u8BF7\u6C42\uFF0C\u5982\u679C\u8981\u8BF7\u6C42\u7684\u57DF\u548C\u5F53\u524D\u57DF\u662F\u4E0D\u540C\u57DF\uFF0C\u5C31\u53EB\u8DE8\u57DF\uFF0C\u4E0D\u540C\u57DF\u4E4B\u95F4\u7684\u8BF7\u6C42\uFF0C\u5C31\u662F\u8DE8\u57DF\u8BF7\u6C42\u3002 \u963B\u6B62\u8DE8\u57DF\u8BF7\u6C42\uFF0C\u5176\u5B9E\u662F\u6D4F\u89C8\u5668\u672C\u8EAB\u7684\u4E00\u79CD\u5B89\u5168\u7B56\u7565--\u540C\u6E90\u7B56\u7565</p><p>\u534F\u8BAE\u3001\u57DF\u540D\u3001\u7AEF\u53E3\u53F7\uFF0C\u4EFB\u4F55\u4E00\u4E2A\u4E0D\u4E00\u6837\uFF0C\u5C31\u662F\u4E0D\u540C\u57DF\uFF0C\u4E0E\u8DEF\u5F84\u65E0\u5173</p><p>https\uFF08\u534F\u8BAE\uFF09\u{1F615}/www.imooc.com\uFF08\u57DF\u540D\uFF09:443\uFF08\u7AEF\u53E3\u53F7\uFF09/course/list\uFF08\u8DEF\u5F84\uFF09</p><h4 id="cors-\u8DE8\u57DF\u8D44\u6E90\u5171\u4EAB" tabindex="-1"><a class="header-anchor" href="#cors-\u8DE8\u57DF\u8D44\u6E90\u5171\u4EAB" aria-hidden="true">#</a> CORS \u8DE8\u57DF\u8D44\u6E90\u5171\u4EAB</h4><p>\u54CD\u5E94\u4F53\u8BF7\u6C42\u5934\u4E2D\uFF0C\u6307\u5B9A\u5141\u8BB8\u8DE8\u57DF\u8D44\u6E90\u5171\u4EAB</p><p>Access-Control-Allow-Origin: *</p><p>\u8868\u660E\u5141\u8BB8\u6240\u6709\u7684\u57DF\u540D\u6765\u8DE8\u57DF\u8BF7\u6C42\u5B83\uFF0C* \u662F\u901A\u914D\u7B26\uFF0C\u6CA1\u6709\u4EFB\u4F55\u9650\u5236</p><p>IE10 \u53CA\u4EE5\u4E0A\u7248\u672C\u7684\u6D4F\u89C8\u5668\u53EF\u4EE5\u6B63\u5E38\u4F7F\u7528 CORS</p><h4 id="jsonp" tabindex="-1"><a class="header-anchor" href="#jsonp" aria-hidden="true">#</a> JSONP</h4><p>JSONP \u4E3B\u8981\u5C31\u662F\u5229\u7528 script \u6807\u7B7E\uFF0C\u52A0\u8F7D\u8DE8\u57DF\u6587\u4EF6\u3002script \u6807\u7B7E\u8DE8\u57DF\u4E0D\u4F1A\u88AB\u6D4F\u89C8\u5668\u963B\u6B62</p><h3 id="xhr" tabindex="-1"><a class="header-anchor" href="#xhr" aria-hidden="true">#</a> XHR</h3><p>responseType \u548C response \u5C5E\u6027</p><p>\u63A5\u53D7\u54CD\u5E94\u5185\u5BB9\u53EF\u4EE5\u901A\u8FC7responseType\u6307\u5B9A<br> responseText \u53EA\u80FD\u5728\u6CA1\u6709\u8BBE\u7F6E responseType \u6216\u8005 responseType = &#39;&#39; \u6216 &#39;text&#39; \u7684\u65F6\u5019\u624D\u80FD\u4F7F\u7528<br> \u8BBE\u7F6Exhr.responseType = &#39;json&#39;; \u53EF\u4EE5\u5728xhr.response\u5C5E\u6027\u63A5\u6536json\u5BF9\u8C61\uFF0C\u800C\u975E\u5B57\u7B26\u4E32</p><p>IE6~9 \u4E0D\u652F\u6301\uFF0CIE10 \u5F00\u59CB\u652F\u6301</p><hr><p>timeout \u5C5E\u6027</p><p>\u8BBE\u7F6E\u8BF7\u6C42\u7684\u8D85\u65F6\u65F6\u95F4\uFF08\u5355\u4F4D ms\uFF09</p><p>IE6~7 \u4E0D\u652F\u6301\uFF0CIE8 \u5F00\u59CB\u652F\u6301</p><hr><p>withCredentials \u5C5E\u6027</p><p>\u6307\u5B9A\u4F7F\u7528 Ajax \u53D1\u9001\u8BF7\u6C42\u65F6\u662F\u5426\u643A\u5E26 Cookie</p><p>\u4F7F\u7528 Ajax \u53D1\u9001\u8BF7\u6C42\uFF0C\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u540C\u57DF\u65F6\uFF0C\u4F1A\u643A\u5E26 Cookie\uFF1B\u8DE8\u57DF\u65F6\uFF0C\u4E0D\u4F1A</p><p>\u6700\u7EC8\u80FD\u5426\u6210\u529F\u8DE8\u57DF\u643A\u5E26 Cookie\uFF0C\u8FD8\u8981\u770B\u670D\u52A1\u5668\u540C\u4E0D\u540C\u610F</p><p>IE6~9 \u4E0D\u652F\u6301\uFF0CIE10 \u5F00\u59CB\u652F\u6301</p><hr><p>abort()</p><p>\u7EC8\u6B62\u5F53\u524D\u8BF7\u6C42\uFF0C\u4E00\u822C\u914D\u5408 abort \u4E8B\u4EF6\u4E00\u8D77\u4F7F\u7528</p><hr><p>setRequestHeader()</p><p>\u53EF\u4EE5\u8BBE\u7F6E\u8BF7\u6C42\u5934\u4FE1\u606F</p><pre><code>xhr.setRequestHeader(\u5934\u90E8\u5B57\u6BB5\u7684\u540D\u79F0, \u5934\u90E8\u5B57\u6BB5\u7684\u503C);
</code></pre><p>\u8BF7\u6C42\u5934\u4E2D\u7684 Content-Type \u5B57\u6BB5\u7528\u6765\u544A\u8BC9\u670D\u52A1\u5668\uFF0C\u6D4F\u89C8\u5668\u53D1\u9001\u7684\u6570\u636E\u662F\u4EC0\u4E48\u683C\u5F0F\u7684</p><pre><code>xhr.setRequestHeader(&#39;Content-Type&#39;, &#39;application/json&#39;);
</code></pre><hr><p>load \u4E8B\u4EF6</p><p>\u54CD\u5E94\u6570\u636E\u53EF\u7528\u65F6\u89E6\u53D1</p><p>IE6~8 \u4E0D\u652F\u6301 load \u4E8B\u4EF6</p><hr><p>error \u4E8B\u4EF6</p><p>\u8BF7\u6C42\u53D1\u751F\u9519\u8BEF\u65F6\u89E6\u53D1</p><p>IE10 \u5F00\u59CB\u652F\u6301</p><hr><p>abort \u4E8B\u4EF6</p><p>\u8C03\u7528 abort() \u7EC8\u6B62\u8BF7\u6C42\u65F6\u89E6\u53D1</p><hr><p>timeout \u4E8B\u4EF6</p><p>\u8BF7\u6C42\u8D85\u65F6\u540E\u89E6\u53D1</p><p>IE8 \u5F00\u59CB\u652F\u6301</p><h3 id="formdata" tabindex="-1"><a class="header-anchor" href="#formdata" aria-hidden="true">#</a> FormData</h3><p>\u4F7F\u7528 Ajax \u63D0\u4EA4\u8868\u5355\uFF0C\u53EF\u4EE5\u4F7F\u7528FormData</p><p>FormData \u7684\u57FA\u672C\u7528\u6CD5</p><p>\u901A\u8FC7 HTML \u8868\u5355\u5143\u7D20\u521B\u5EFA FormData \u5BF9\u8C61</p><pre><code>const fd = new FormData(\u8868\u5355\u5143\u7D20);
xhr.send(fd);
</code></pre><p>\u901A\u8FC7 append() \u65B9\u6CD5\u6DFB\u52A0\u6570\u636E</p><pre><code>const fd = new FormData();
fd.append(&#39;age&#39;, 18);
xhr.send(fd);
</code></pre><p>IE10 \u53CA\u4EE5\u4E0A\u53EF\u4EE5\u652F\u6301</p><h3 id="\u6269\u5C55" tabindex="-1"><a class="header-anchor" href="#\u6269\u5C55" aria-hidden="true">#</a> \u6269\u5C55</h3><p>axios \u662F\u4E00\u4E2A\u57FA\u4E8E Promise \u7684 HTTP \u5E93\uFF0C\u53EF\u4EE5\u7528\u5728\u6D4F\u89C8\u5668\u548C node.js \u4E2D\uFF08http://www.axios-js.com/zh-cn/docs/\uFF09</p><p>Fetch \u4E5F\u662F\u524D\u540E\u7AEF\u901A\u4FE1\u7684\u4E00\u79CD\u65B9\u5F0F<br> Fetch \u662F Ajax\uFF08XMLHttpRequest\uFF09\u7684\u4E00\u79CD\u66FF\u4EE3\u65B9\u6848\uFF0C\u5B83\u662F\u57FA\u4E8E Promise \u7684<br> Ajax \u7684\u517C\u5BB9\u6027\u6BD4 Fetch \u597D</p>`,79),o=[n];function s(d,h){return a(),r("div",null,o)}var x=e(t,[["render",s],["__file","chapter23.html.vue"]]);export{x as default};
